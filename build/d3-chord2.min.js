!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],e):e(n.d3=n.d3||{},n.d3)}(this,function(n,e){"use strict";function r(n){return function(e,r){return n(e.source.value+e.target.value,r.source.value+r.target.value)}}function t(){function n(n){var r,s,c,h,i,p,g,d,v=n.length,x=u.length,y=e.range(x),A=2*Math.PI,m=[],M=e.range(v),b=[],_=[],O=[],j=[],w=j.groups=new Array(v),E=new Array(v*v),G=0,P=0,S=[];for(b=[].concat.apply([],u),c=0;c<M.length;c++)-1==b.indexOf(M[c])&&(b.push(M[c]),u.push(M[c]));for(p=0,c=-1;++c<v;){for(r=0,h=-1;++h<v;)r+=n[c][h];m.push(r),O.push(e.range(v)),p+=r}if(o&&(g=p,p=o>g?o:p),p=u?Math.max(0,A-t*(v-x))/p:Math.max(0,A-t*v)/p,d=p?t:A/v,o&&(d=(A-t-g*p)/x),u){for(c=0;c<u.length;c++){for(i=u[c].length?u[c].length:1,h=0;h<i;h++)G+=m[P],P++,c<1||h>0?S.push(0):S.push(d);_.push(G),G=0}S.shift(),S.push(0),M=b}if(a){y.sort(function(n,e){return a(_[n],_[e])});var q=[];for(y.forEach(function(n){q.push(u[n])}),M=[].concat.apply([],q),c=0;c<v;c++)-1==M.indexOf(b[c])&&M.push(b[c])}for(l&&O.forEach(function(e,r){e.sort(function(e,t){return l(n[r][e],n[r][t])})}),r=0,c=-1;++c<v;){for(s=r,h=-1;++h<v;){var C=M[c],I=O[C][h],k=n[C][I],z=r,B=r+=k*p;E[I*v+C]={index:C,subindex:I,startAngle:z,endAngle:B,value:k}}w[C]={index:C,startAngle:s,endAngle:r,value:m[C]},r+=u?S[c]:d}for(c=-1;++c<v;)for(h=c-1;++h<v;){var D=E[h*v+c],F=E[c*v+h];(D.value||F.value)&&j.push(D.value<F.value?{source:F,target:D}:{source:D,target:F})}return f?j.sort(f):j}var t=0,u=null,o=null,a=null,l=null,f=null;return n.padAngle=function(e){return arguments.length?(t=Math.max(0,e),n):t},n.arcGroups=function(e){return arguments.length?(u=e,n):u},n.chordSum=function(e){return arguments.length?(o=e,n):o},n.sortArcGroups=function(e){return arguments.length?(a=e,n):a},n.sortSubgroups=function(e){return arguments.length?(l=e,n):l},n.sortChords=function(e){return arguments.length?(null==e?f=null:(f=r(e))._=e,n):f&&f._},n}n.chord2=t,Object.defineProperty(n,"__esModule",{value:!0})});