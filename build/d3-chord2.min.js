!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],r):r(n.d3=n.d3||{},n.d3)}(this,function(n,r){"use strict";function e(n){return function(r,e){return n(r.source.value+r.target.value,e.source.value+e.target.value)}}function t(){function n(n){var e,s,c,h,i,p,g,d,v=n.length,x=2*Math.PI,y=[],A=r.range(v),m=[],M=[],b=[],_=[],O=_.groups=new Array(v),j=new Array(v*v),w=0,E=0,G=[];if(u){var P=u.length,S=r.range(P);for(m=[].concat.apply([],u),c=0;c<A.length;c++)-1==m.indexOf(A[c])&&(m.push(A[c]),u.push(A[c]))}for(p=0,c=-1;++c<v;){for(e=0,h=-1;++h<v;)e+=n[c][h];y.push(e),b.push(r.range(v)),p+=e}if(o&&(g=p,p=o>g?o:p),p=u?Math.max(0,x-t*(v-P))/p:Math.max(0,x-t*v)/p,d=p?t:x/v,o&&(d=(x-t-g*p)/P),u){for(c=0;c<u.length;c++){for(i=u[c].length?u[c].length:1,h=0;h<i;h++)w+=y[E],E++,c<1||h>0?G.push(0):G.push(d);M.push(w),w=0}G.shift(),G.push(0),A=m}if(a){S.sort(function(n,r){return a(M[n],M[r])});var q=[];for(S.forEach(function(n){q.push(u[n])}),A=[].concat.apply([],q),c=0;c<v;c++)-1==A.indexOf(m[c])&&A.push(m[c])}for(l&&b.forEach(function(r,e){r.sort(function(r,t){return l(n[e][r],n[e][t])})}),e=0,c=-1;++c<v;){for(s=e,h=-1;++h<v;){var C=A[c],I=b[C][h],k=n[C][I],z=e,B=e+=k*p;j[I*v+C]={index:C,subindex:I,startAngle:z,endAngle:B,value:k}}O[C]={index:C,startAngle:s,endAngle:e,value:y[C]},e+=u?G[c]:d}for(c=-1;++c<v;)for(h=c-1;++h<v;){var D=j[h*v+c],F=j[c*v+h];(D.value||F.value)&&_.push(D.value<F.value?{source:F,target:D}:{source:D,target:F})}return f?_.sort(f):_}var t=0,u=null,o=null,a=null,l=null,f=null;return n.padAngle=function(r){return arguments.length?(t=Math.max(0,r),n):t},n.arcGroups=function(r){return arguments.length?(u=r,n):u},n.chordSum=function(r){return arguments.length?(o=r,n):o},n.sortArcGroups=function(r){return arguments.length?(a=r,n):a},n.sortSubgroups=function(r){return arguments.length?(l=r,n):l},n.sortChords=function(r){return arguments.length?(null==r?f=null:(f=e(r))._=r,n):f&&f._},n}n.chord2=t,Object.defineProperty(n,"__esModule",{value:!0})});