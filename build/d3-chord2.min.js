!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],r):r(n.d3=n.d3||{},n.d3)}(this,function(n,r){"use strict";function e(n){return function(r,e){return n(r.source.value+r.target.value,e.source.value+e.target.value)}}function t(){function n(n){var e,s,c,h,i,g,p,d,v=n.length,x=u.length,y=r.range(x),A=2*Math.PI,m=[],M=r.range(v),b=[],_=[],O=[],j=[],w=j.groups=new Array(v),E=new Array(v*v),G=0,P=0,S=[];for(b=[].concat.apply([],u),c=0;c<M.length;c++)-1==b.indexOf(M[c])&&(b.push(M[c]),u.push(M[c]));for(g=0,c=-1;++c<v;){for(e=0,h=-1;++h<v;)e+=n[c][h];m.push(e),O.push(r.range(v)),g+=e}if(o&&(p=g,g=o>p?o:g),g=u?Math.max(0,A-t*(v-x))/g:Math.max(0,A-t*v)/g,d=g?t:A/v,o&&(d=(A-t-p*g)/x),u){for(c=0;c<u.length;c++){for(i=u[c].length?u[c].length:1,h=0;h<i;h++)G+=m[P],P++,c<1||h>0?S.push(0):S.push(d);_.push(G),G=0}S.shift(),S.push(0),M=b}if(a){y.sort(function(n,r){return a(_[n],_[r])});var q=[];y.forEach(function(n){q.push(u[n])}),M=[].concat.apply([],q);var C=r.range(v);for(c=0;c<v;c++)-1==M.indexOf(C[c])&&M.push(c)}for(l&&O.forEach(function(r,e){r.sort(function(r,t){return l(n[e][r],n[e][t])})}),e=0,c=-1;++c<v;){for(s=e,h=-1;++h<v;){var I=M[c],k=O[I][h],z=n[I][k],B=e,D=e+=z*g;E[k*v+I]={index:I,subindex:k,startAngle:B,endAngle:D,value:z}}w[I]={index:I,startAngle:s,endAngle:e,value:m[I]},e+=u?S[c]:d}for(c=-1;++c<v;)for(h=c-1;++h<v;){var F=E[h*v+c],H=E[c*v+h];(F.value||H.value)&&j.push(F.value<H.value?{source:H,target:F}:{source:F,target:H})}return f?j.sort(f):j}var t=0,u=null,o=null,a=null,l=null,f=null;return n.padAngle=function(r){return arguments.length?(t=Math.max(0,r),n):t},n.arcGroups=function(r){return arguments.length?(u=r,n):u},n.chordSum=function(r){return arguments.length?(o=r,n):o},n.sortArcGroups=function(r){return arguments.length?(a=r,n):a},n.sortSubgroups=function(r){return arguments.length?(l=r,n):l},n.sortChords=function(r){return arguments.length?(null==r?f=null:(f=e(r))._=r,n):f&&f._},n}n.chord2=t,Object.defineProperty(n,"__esModule",{value:!0})});